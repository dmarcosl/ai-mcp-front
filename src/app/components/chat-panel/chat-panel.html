<div class="mat-elevation-z2"
     style="height:100%; display:flex; flex-direction:column;">

  <div style="flex:1; overflow:auto; padding:8px; display:flex; flex-direction:column; gap:8px;">
    @for (m of history; track $index) {
      <div style="display:flex; width:100%;"
           [style.justify-content]="m.from==='user' ? 'flex-end' : 'flex-start'">
        <mat-card class="mat-elevation-z2"
                  [style.background-color]="m.from==='user'? 'rgba(9,157,234,0.53)': 'rgba(14,175,72,0.53)'"
                  style="padding:8px 12px; border-radius:16px; max-width:85%;
        white-space:pre-wrap; word-break:break-word; box-sizing:border-box;">
          <mat-card-content style="padding:0;">
            {{ m.text }}
          </mat-card-content>
        </mat-card>
      </div>
    }
    <div #bottom></div>
  </div>

  <form (ngSubmit)="send()"
        style="display:flex; gap:8px; padding:8px; border-top: 1px solid rgba(255,255,255,.12);">
    <mat-form-field appearance="outline" style="flex:1;">
      <mat-label>Ask anything</mat-label>
      <input matInput [(ngModel)]="input" name="input"/>
    </mat-form-field>
    <button mat-icon-button color="primary" type="submit" aria-label="Send">
      <mat-icon>send</mat-icon>
    </button>
  </form>
</div>
